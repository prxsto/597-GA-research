% sage_latex_guidelines.tex V1.20, 14 January 2017

\documentclass[sagev,times,Royal]{sagej}
% add 'doublespace'

\usepackage{moreverb,url}

\usepackage{graphicx}

\usepackage[colorlinks,bookmarksopen,bookmarksnumbered,citecolor=red,urlcolor=red]{hyperref}

\newcommand\BibTeX{{\rmfamily B\kern-.05em \textsc{i\kern-.025em b}\kern-.08em
T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\def\volumeyear{2021}

\begin{document}

\runninghead{Pape}

\title{Energy simulation and analysis of accessory dwelling units: 
an evolutionary approach}

\author{P. Arthur Pape\affilnum{1}}

\affiliation{\affilnum{1}University of Washington}

\corrauth{P. Arthur Pape}

\email{ppape@uw.edu}

\begin{abstract}
Accessory dwelling units (ADUs) are surging in popularity as cities push for their construction to aid in combatting the housing crisis. In Seattle, recent survey data calls for increased focus on sustainability and cost. Lowering energy use intensity (EUI) of ADUs allows for the targeting of both desires which homeowners hold. The effect of varying window-to-wall ratios (WWRs) on EUI is simulated using EnergyPlus and Honeybee. Galapagos, a genetic solver plugin for Grasshopper is used to vary window-to-wall ratio and optimize ADU energy use intensity on three single family residential lots in Seattle, Washington. Site context is constructed using OpenStreetMap GIS data and zoning restrictions are incorporated into the Grasshopper definition. Future work is planned to utilize output data from this tool as the training dataset for a machine learning model. Accurate machine learning prediction of energy use intensity instead of extended simulation would increase pragmatic use of such tools.
\end{abstract}

\keywords{Genetic algorithm, accessory dwelling unit, housing, optimization, simulation, energy use intensity, grasshopper, galapagos}

\maketitle

%TODO Complete explanation of Honeybee energy model and Galapagos genetic solver subsections within methods.
%TODO Add data visualizations of results, additional simplified plans or renderings of DADUs and sites
%TODO Flesh out conclusion, limit and refine portion on future work towards machine learning surrogate modeling

\section{Introduction}
The United States is amidst an unprecedented housing crisis, stemming from parallel crises: from neoliberal austerity spending cuts towards social benefits to the near-virtual lack of social housing and rent control programs in the United States to the ever-increasing privatization of essentially every aspect of American life\cite{10.2307/26297969}. The result is a rising population of unhoused peoples and the inability for many to become a homeowner or to even afford minimum monthly rent in many cities. Solutions to this dilemma are neither straightforward nor definite. However, designers and architects can only address the symptom-level problems, while advocating towards change directed at the root cause. 

Seattle, Washington; Portland, Oregon; and Vancouver, British Columbia are exploring the use of accessory dwelling units (ADUs) as one method to combat surging housing prices. Use of ADUs is an effective means of increasing housing density without replacing single family housing zones with new multi family residential construction. Additionally, ADUs are often designed to be rented, generating supplementary income for the homeowner. Historically, homeowner’s associations and other local organizations have  been resistant to any proposed density increases through zoning or other means\cite{10.2307/24392672}. However, Seattle and the other previously mentioned cities in the Pacific Northwest have succeeded in allowing for the construction of ADUs in recent decades, with these groups beginning to see ADUs as a positive. ADUs offer many positives beyond an increased housing supply such as a path for homeowners to generate income and accommodating households with multigenerational or caretaking needs.

Beginning in 2014, the City of Seattle has moved to increase production of ADUs through various resolutions and legislation, in turn removing barriers to entry and highlighting strategies for encouragement. In late 2019, a call for detached ADU (or DADU) designs was issued to designers. As a result, ten DADU designs were pre-approved by the City of Seattle and are available online to entice homeowners\cite{ADUniversePreapprovedADU}. The pre-approved designs are free, but still require standard permitting fees to be paid for approval and come with one significant downside of many other pre-designed structures: a lack of contextual design and individualization. This one-size-fits-all approach can have drastic effects upon energy consumption, reducing the appeal of such an investment. Further, these designs do not offer the scalability or energy efficiency that an ADU designed specifically per site offers.

 Coincidentally, a November 2019 city survey shows that there are calls for an increased focus on sustainability and cost in the construction of ADUs\cite{seattlePreapprovedPlansAccessory2019}. This survey was positioned before the official call for submissions was broadcast. 'Low cost' was the top ranked criteria with 48\% of responses listing 'very important', followed by 'green building' being ranked similarly at 46\%. Other suggestions sourced from surveyed respondents included low environmental costs, site specific considerations, and predictability. The ability to show users the estimated annual energy consumption of a new construction DADU would have a major impact on driving construction demand based on survey responses noted. Using an optimization method such as a genetic algorithm can allow architects to arrive at the most effective design solution on a site specific basis while predictably minimizing both environmental and financial costs. 
 
\section{Methods} 
\subsection{Design constraints and decisions}
This research explores the use of a genetic solver to find the optimal design solution of window-to-wall ratios (WWR) for a simple DADU form resulting in the lowest EUI value. Three sites in similar neighborhoods in the city of Seattle were selected based on a combination of proximity and slight density variance. The tool adheres to Seattle's land use code to find estimated buildable area for a DADU on each site, creates a simple box-like form representing the DADU and then varies the WWR value for each of the four walls. A genetic solver plugin is then allowed to vary these ratios to find an optimal solution using a process largely mimicking natural genetic processes. Finally, an energy model is created from each individual iteration to find an estimate for overall EUI. From here, the process loops until an optimal solution (in this case, via minimizing EUI) is found.

%TODO merge these two (upper and lower) sections together
Site locations were chosen through the use of the \textit{ADUniverse} tool, developed by the University of Washington researchers at the eScience Institute\cite{ADUniverseToolEScience}. ADUniverse allows for users to investigate the possibility of constructing an ADU through a map-based user interface. Chosen sites are located within the Madrona, Minor, and Central District neighborhoods of Seattle, WA. All three sites are zoned under SF5000, a single family residential zoning. Site data was extracted from the city of Seattle's GIS website, converted into an AutoCAD .DWG file, and then imported into and extruded within Rhinoceros 6 (Rhino), a 3D modeling software. Lot lines surrounding each house are fed into the Grasshopper definition, coupled with constraints in line with the current Seattle Land Use Code. Such universal constraints for ADUs on lots located within SF5000 zoning are as follows\cite{ADURules}: 

% itemized list of zoning restrictions for each site
\begin{itemize}
	\item Lot size must be at least 3200 square feet
	\item Minimum lot width of 25 feet
	\item Minimum lot length of 70 feet
	\item DADU can occupy \textit{at most} 60\% of rear yard	
	\item Front yard of 20 feet, side yards of 5 feet, rear yard of 25  feet
	\item DADU height limit varies based on lot width: \begin{itemize}
	\item 14 feet for lot widths less than 30 feet
	\item 16 feet for lot widths between 40 and 50 feet
	\item 18 feet for lot widths exceeding 50 feet \end{itemize}
\end{itemize}

These constraints are built into the Grasshopper definition in such a way that the tool only requires lot extents and the outline of the existing residential structure to develop the buildable area for any DADU construction. The DADU is represented as a simple box with dimensions of (fill this in once all 3 sites have been finalized). This minimal geometry is located congruent to lot lines and the existing structure. Under current Seattle Residential Building Code (2018), minimum R-values for wall and ceiling assemblies are R-21 and R-49, respectively. Light wood frame construction was chosen for all three sites, as the majority of residential construction in the United States and in Seattle specifically falls under this category due to price and ubiquity. For this project, wall assembly was specified to a total R-value of 29.232 (see Table \ref{table:wall-assembly}.). 
\textit{\textbf{***Insert second table or append data to existing table of slab and ceiling R-values***}}

Next, the variable aspect of the DADU lies in the window-to-wall ratios of each of the four facades, which line up with the cardinal directions. The ratio between solid and glazed facade areas is allowed to shift between 

%TODO revise assembly table to match assembly used in grasshopper
\begin{table}[]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{lcccc}
\hline
\multicolumn{1}{|l|}{\textbf{Assembly}} &
  \multicolumn{1}{l|}{\textbf{Notes}} &
  \multicolumn{1}{c|}{\textbf{R-Value}} &
  \multicolumn{1}{l|}{\textbf{Path 1 (Insulation)}} &
  \multicolumn{1}{l|}{\textbf{Path 2 (Framing)}} \\ \hline
\multicolumn{1}{|l|}{Air Film} &
  \multicolumn{1}{c|}{Interior} &
  \multicolumn{1}{c|}{0.68} &
  \multicolumn{1}{c|}{0.68} &
  \multicolumn{1}{c|}{0.68} \\ \hline
\multicolumn{1}{|l|}{Gypsum Board} &
  \multicolumn{1}{c|}{1/2"} &
  \multicolumn{1}{c|}{0.45} &
  \multicolumn{1}{c|}{0.45} &
  \multicolumn{1}{c|}{0.45} \\ \hline
\multicolumn{1}{|l|}{Vapor Barrier} &
  \multicolumn{1}{c|}{} &
  \multicolumn{1}{c|}{0} &
  \multicolumn{1}{c|}{0} &
  \multicolumn{1}{c|}{0} \\ \hline
\multicolumn{1}{|l|}{Fiberglass Insulation} &
  \multicolumn{1}{c|}{} &
  \multicolumn{1}{c|}{3.5} &
  \multicolumn{1}{c|}{28} &
  \multicolumn{1}{c|}{-} \\ \hline
\multicolumn{1}{|l|}{2" x 8" Wood Stud} &
  \multicolumn{1}{c|}{16" o.c.} &
  \multicolumn{1}{c|}{14.68} &
  \multicolumn{1}{c|}{-} &
  \multicolumn{1}{c|}{14.68} \\ \hline
\multicolumn{1}{|l|}{Air Gap} &
  \multicolumn{1}{c|}{1"} &
  \multicolumn{1}{c|}{1} &
  \multicolumn{1}{c|}{1} &
  \multicolumn{1}{c|}{1} \\ \hline
\multicolumn{1}{|l|}{Wood Cladding} &
  \multicolumn{1}{c|}{3/4"} &
  \multicolumn{1}{c|}{0.93} &
  \multicolumn{1}{c|}{0.93} &
  \multicolumn{1}{c|}{0.93} \\ \hline
\multicolumn{1}{|l|}{Air Film} &
  \multicolumn{1}{c|}{Exterior} &
  \multicolumn{1}{c|}{0.17} &
  \multicolumn{1}{c|}{0.17} &
  \multicolumn{1}{c|}{0.17} \\ \hline
 &
  \multicolumn{1}{c|}{} &
  \multicolumn{1}{c|}{\textbf{R-Total:}} &
  \multicolumn{1}{c|}{31.23} &
  \multicolumn{1}{c|}{17.91} \\ \cline{3-5} 
 &
  \multicolumn{1}{l}{} &
  \multicolumn{1}{l}{} &
  \textit{x 85\%} &
  \textit{x 15\%} \\
 &
  \multicolumn{1}{l}{} &
  \multicolumn{1}{l}{} &
  26.5455 &
  2.6865 \\ \cline{3-5} 
 &
  \multicolumn{1}{l|}{} &
  \multicolumn{1}{c|}{\textbf{Wall R-Value:}} &
  \multicolumn{2}{c|}{29.232} \\ \cline{3-5} 
 &
  \multicolumn{1}{l|}{} &
  \multicolumn{1}{l|}{\textbf{Wall U-Value:}} &
  \multicolumn{2}{c|}{0.0342} \\ \cline{3-5} 
 &
  \multicolumn{1}{l}{} &
  \multicolumn{1}{l}{} &
  \multicolumn{1}{l}{} &
  \multicolumn{1}{l}{}
\end{tabular}%
}
\caption{Wall Assembly R- and U-Values}
\label{table:wall-assembly}
\end{table}

\subsection{Energy model and analysis}
Honeybee, part of the open-source Ladybug Tools plugin suite for Grasshopper and Rhino, has become an industry standard for daylighting simulation and energy modeling within architecture and engineering. Honeybee acts as a bridge between modeled Rhino geometry and the United States Department of Energy's EnergyPlus simulation tool. Modeled geometry is constructed as rooms and zones within Honeybee, offering greater granularity. Using four zones and a core allows Honeybee and EnergyPlus to take into account the effect of glazing proportions on each facade has on heating and cooling EUI in more detail. EnergyPlus operates using various abstractions and simplifications and these are important to note. Each zone and surface is only able to hold one temperature value at a time- each singular value is averaged across the zone or surface. Each DADU simulated is represented as four zones and a core, the standard for simulations of this type. Alternatively, using one zone instead would have assisted with quicker simulation times, and therefore quicker optimization speed. 
 
Similarly, trees are represented as simple cylindrical solids, in order to keep energy simulation speed quick and to reduce the time necessary to reach an optimal solution. In initial tests, trees were represented as spherical meshes created using Grasshopper. These more-detailed trees varied in opaque triangulated mesh coverage to simulate foliage cover and to more accurately cast shadows. It is important to note that with access to greater computing power it could become reasonable to represent and simulate trees in the original format.

%TODO all inputs, geometry or otherwise required for honeybee/energyplus

\subsection{Genetic algorithm}
Genetic algorithms (GA) operate using logic that mimics biological evolution to optimize a value. Fitness functions are the means by which to objectively evaluate the strength of individual designs. In this case, the fitness function specified works to minimize the resultant EUI value of each DADU design. Work was initially done using a purely Python-based GA script, but later pivoted to utilizing Galapagos, a genetic solver plugin that ships with Grasshopper. Galapagos offers a simple user interface and more direct integration within Grasshopper at the cost of advanced options. These options however were not necessary for the level of optimization required within this project.

%Together, the contextual 3D model, the specific design iteration of the DADU with varying WWRs, and the EUI value 
\section{Results}

\section{Conclusion}
%TODO Add main conclusion section
%TODO Benefit of a pure python tool 
Looking forward, moving on from the Grasshopper platform gives the benefit of non-reliance on developers to maintain the software in which the tool depends. Creation of such a tool in a singular programming language (in this case Python) further offers the ability to quickly and easily run the tool on a high variance of devices. In turn, this theoretically increases the rate of adoption by lowering the requirement to use the design tool. Additionally, Python is used within Rhino/Grasshopper (or a flavor thereof), provides many useful math and geometry libraries, and has options for injection into a web app (Flask and Django).
%TODO Limitations of Galapagos/Grasshopper workflow
%TODO ***User ability to override window sizing and placement- feedback loop?
Utilizing Grasshopper and Galapagos offers a ‘sandbox’ environment to begin to understand genetic algorithms and to arrive at tangible design solutions faster than using a home-brewed algorithm. Galapagos offers many fewer input parameters and a much narrower scope in which to define the fitness function. In its out-of-the-box form, Galapagos only accepts number sliders as input and can only optimize integers and floats- in reality, there is not means in which to define a true fitness function, only numerical values to target. 
%TODO future work of training machine learning model using energyplus data to replace simulation timesink

%Figures are called in as follows:
%\begin{verbatim}
%\begin{figure}
%\centering
%\includegraphics{<figure name>}
%\caption{<Figure caption>}
%\end{figure}
%\end{verbatim}

%\subsection{Cross-referencing}
%The use of the \LaTeX\ cross-reference system
%for figures, tables, equations, etc., is encouraged
%(using \verb"\ref{<name>}" and \verb"\label{<name>}").
%
%\subsection{Endnotes}
%Most \textit{SAGE} journals use endnotes rather than footnotes, so any notes should be coded as \verb+\endnote{<Text>}+.
%Place the command \verb+\theendnotes+ just above the Reference section to typeset the endnotes.
%
%To avoid any confusion for papers that use Vancouver style references,  footnotes/endnotes should be edited into the text.

\begin{acks}
The author would like to thank Professor Tomas Mendez Echenagucia for his genetic algorithm expertise and input; Teresa Moroseos for her assistance with Honeybee debugging; Professor Alex Anderson and fellow students in Arch597 at University of Washington for feedback and motivation.
\end{acks}

\begin{funding}
The author(s) received no financial support for the research, authorship, and/or publication of this article.
\end{funding}

\begin{dci}
	The author(s) declared no potential conflicts of interest with respect to the research, authorship, and/or publication of this article.
\end{dci}

\bibliographystyle{SageV}
\bibliography{597_bibliography}

\end{document}
